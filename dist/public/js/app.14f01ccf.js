(function(e){function t(t){for(var i,n,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&f.push(r[n][0]),r[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},r={app:0},o=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},1:function(e,t){},"5c0b":function(e,t,a){"use strict";var i=a("9c0c"),r=a.n(i);r.a},"9c0c":function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i,r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],s=(a("5c0b"),a("2877")),c={},l=Object(s["a"])(c,o,n,!1,null,null,null),h=l.exports,u=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game"},[e.patternCreator.isOpen?a("section",{staticClass:"creator"},[a("h1",{staticClass:"creator-header"},[e._v("Kreator struktur")]),a("ul",{staticClass:"creator-grid"},e._l(e.patternCreator.grid,(function(t,i){return a("ul",{key:i,staticClass:"grid-row"},e._l(e.patternCreator.grid[i],(function(t,r){return a("ul",{key:r,staticClass:"grid-col"},[a("li",{staticClass:"grid-cell",class:e.patternCreator.grid[i][r]?"activated":"",on:{click:function(t){return e.patternCreator.toggleCell(i,r)}}})])})),0)})),0),a("div",{staticClass:"creator-actions"},[a("button",{staticClass:"action_choose-pattern",on:{click:function(t){return e.patternCreator.choosePattern()}}},[e._v("Dodaj strukturę")]),a("button",{staticClass:"action_close-creator",on:{click:function(t){return e.patternCreator.closeCreator()}}},[e._v("Wyjdź z kreatora")])])]):e._e(),a("main",{staticClass:"main-content"},[a("div",{staticClass:"game-wrapper"},[a("div",{staticClass:"floating-actions"},[a("button",{staticClass:"action_open-creator",on:{click:function(t){e.patternCreator.isOpen?e.patternCreator.closeCreator():e.patternCreator.openCreator()}}},[e._v("Kreator")]),a("button",{staticClass:"action_toggle-heatmap",on:{click:function(t){return e.toggleHeatmapView()}}},[e._v("Heatmap")])]),a("v-touch",{on:{touch:function(t){return e.console.log("xd")}}},[a("canvas",{ref:"canvas",on:{mousemove:e.mouseMove,click:e.canvasClick,mousedown:e.mouseDown,mouseup:e.mouseUp,mouseout:e.mouseOut}})])],1)])])},m=[],d=(a("4160"),a("159b"),a("5530")),g=a("d4ec"),v=a("bee2"),p=a("257e"),C=a("262e"),w=a("2caf"),S=a("9ab4"),G=a("60a3"),x=a("8055"),y=a.n(x),k=function(){function e(t){Object(g["a"])(this,e),this._creatorOpen=!1,this._placingPattern=!1,this._grid=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this._instance=t}return Object(v["a"])(e,[{key:"resetGrid",value:function(){for(var e=0;e<this._grid.length;e++)for(var t=0;t<this._grid[e].length;t++)this._instance.$set(this._grid[e],t,0)}},{key:"openCreator",value:function(){this._creatorOpen=!0,this._placingPattern=!1}},{key:"closeCreator",value:function(){this._creatorOpen=!1,this._placingPattern=!1}},{key:"choosePattern",value:function(){this._creatorOpen=!1,this._placingPattern=!0}},{key:"toggleCell",value:function(e,t){this._instance.$set(this._grid[e],t,this._grid[e][t]?0:1)}},{key:"grid",get:function(){return this._grid}},{key:"isOpen",get:function(){return this._creatorOpen}},{key:"isPlacing",get:function(){return this._placingPattern}}]),e}();(function(e){e[e["LOADING"]=0]="LOADING",e[e["PREPARED"]=1]="PREPARED",e[e["RUNNING"]=2]="RUNNING"})(i||(i={}));var _=function(e){Object(C["a"])(a,e);var t=Object(w["a"])(a);function a(){var e;return Object(g["a"])(this,a),e=t.apply(this,arguments),e.patternCreator=new k(Object(p["a"])(e)),e.gameState=i.LOADING,e.camera={offsetX:0,offsetY:0,viewBox:{fromCellX:0,fromCellY:0,toCellX:0,toCellY:0}},e.mouseX=0,e.mouseY=0,e.mousePanStartX=0,e.mousePanStartY=0,e.mouseZoomStartX=0,e.mouseZoomStartY=0,e.mouseCellRow=0,e.mouseCellCol=0,e.mouseDragging=!1,e.heatmapOn=!1,e.needRedraw=!1,e.isDev=!1,e.devPort=2e3,e.canvasRatio=16/9,e.responsiveSm=900,e}return Object(v["a"])(a,[{key:"calculateViewBox",value:function(){this.camera.viewBox.fromCellX=Math.floor(-this.camera.offsetX/this.gameGrid.cellSize),this.camera.viewBox.toCellX=this.camera.viewBox.fromCellX+Math.floor(this.canvasBoundary.width/this.gameGrid.cellSize),this.camera.viewBox.fromCellY=Math.floor(-this.camera.offsetY/this.gameGrid.cellSize),this.camera.viewBox.toCellY=this.camera.viewBox.fromCellY+Math.floor(this.canvasBoundary.height/this.gameGrid.cellSize)}},{key:"created",value:function(){this.socket=y()(this.isDev?"http://localhost:".concat(this.devPort):""),this.handleSocketConnection()}},{key:"mounted",value:function(){var e=this;this.context=this.$refs.canvas.getContext("2d"),window.addEventListener("resize",(function(){e.resizeCanvas(),e.drawCurrentScene()}))}},{key:"handleSocketConnection",value:function(){var e=this;this.socket.on("init_pack",(function(t){e.gameGrid=Object(d["a"])({},t),e.resizeCanvas(),e.camera.offsetX=(e.context.canvas.width-e.gameGrid.dimensions.cols*e.gameGrid.cellSize)/2,e.camera.offsetY=(e.context.canvas.height-e.gameGrid.dimensions.rows*e.gameGrid.cellSize)/2,e.calculateViewBox(),e.drawCurrentScene(),e.gameState=i.RUNNING})),this.socket.on("update_pack",(function(t){e.gameGrid.updates=t.nextGen,e.gameGrid.updates.forEach((function(t){e.gameGrid.currentGen[t.row][t.col].state=t.state,t.row>=e.camera.viewBox.fromCellY&&t.row<=e.camera.viewBox.toCellY&&t.col>=e.camera.viewBox.fromCellX&&t.col<=e.camera.viewBox.toCellX&&(e.context.fillStyle=t.state?"black":"white",e.context.fillRect(t.col*e.gameGrid.cellSize+e.camera.offsetX,t.row*e.gameGrid.cellSize+e.camera.offsetY,e.gameGrid.cellSize,e.gameGrid.cellSize),e.context.strokeRect(t.col*e.gameGrid.cellSize+e.camera.offsetX,t.row*e.gameGrid.cellSize+e.camera.offsetY,e.gameGrid.cellSize,e.gameGrid.cellSize))})),e.gameGrid.currentIteration=t.currentIteration}))}},{key:"toggleHeatmapView",value:function(){this.heatmapOn=!this.heatmapOn}},{key:"resizeCanvas",value:function(){var e=Math.min(window.innerWidth,1400),t=800;this.context.canvas.width=e,this.context.canvas.height=t,this.canvasWidth=e,this.canvasHeight=t,this.canvasBoundary=this.context.canvas.getBoundingClientRect()}},{key:"mouseOut",value:function(e){this.mouseDragging=!1}},{key:"mouseMove",value:function(e){this.gameState==i.RUNNING&&(this.mouseCellCol=Math.floor((e.pageX-this.camera.offsetX-this.canvasBoundary.left)/this.gameGrid.cellSize),this.mouseCellRow=Math.floor((e.pageY-this.camera.offsetY-this.canvasBoundary.top)/this.gameGrid.cellSize),this.mouseDragging&&(this.camera.offsetX=e.pageX-this.mousePanStartX,this.camera.offsetY=e.pageY-this.mousePanStartY,this.calculateViewBox(),this.needRedraw=!0,this.drawCurrentScene()),this.patternCreator.isPlacing&&(this.drawCurrentScene(),this.drawPattern()))}},{key:"mouseDown",value:function(e){this.gameState==i.RUNNING&&(this.patternCreator.isPlacing||(this.mousePanStartX=e.pageX-this.camera.offsetX,this.mousePanStartY=e.pageY-this.camera.offsetY,this.mouseDragging=!0))}},{key:"mouseUp",value:function(e){this.gameState==i.RUNNING&&this.mouseDragging&&(this.camera.offsetX=e.pageX-this.mousePanStartX,this.camera.offsetY=e.pageY-this.mousePanStartY,this.drawCurrentScene(),this.mouseDragging=!1,this.needRedraw=!1)}},{key:"canvasClick",value:function(e){this.gameState==i.RUNNING&&!this.patternCreator.isOpen&&this.patternCreator.isPlacing&&(this.socket.emit("create_pattern",{pattern:this.patternCreator.grid,offsetRow:this.mouseCellRow-2,offsetCol:this.mouseCellCol-2}),this.patternCreator.resetGrid(),this.patternCreator.closeCreator(),this.drawCurrentScene())}},{key:"drawCurrentScene",value:function(){this.context.fillStyle="white",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.fillStyle="black";for(var e=this.camera.viewBox.fromCellY;e<this.camera.viewBox.toCellY+1;e++)for(var t=this.camera.viewBox.fromCellX;t<this.camera.viewBox.toCellX+1;t++)e<0||e>this.gameGrid.dimensions.rows-1||t<0||t>this.gameGrid.dimensions.cols-1||1==this.gameGrid.currentGen[e][t].state&&this.context.fillRect(t*this.gameGrid.cellSize+this.camera.offsetX,e*this.gameGrid.cellSize+this.camera.offsetY,this.gameGrid.cellSize,this.gameGrid.cellSize);this.context.lineWidth=1,this.context.strokeStyle="gray";for(var a=this.camera.viewBox.fromCellY;a<this.camera.viewBox.toCellY+1;a++)for(var i=this.camera.viewBox.fromCellX;i<this.camera.viewBox.toCellX+1;i++)a<0||a>this.gameGrid.dimensions.rows-1||i<0||i>this.gameGrid.dimensions.cols-1||this.context.strokeRect(i*this.gameGrid.cellSize+this.camera.offsetX,a*this.gameGrid.cellSize+this.camera.offsetY,this.gameGrid.cellSize,this.gameGrid.cellSize)}},{key:"drawPattern",value:function(){var e=!1;this.context.fillStyle="green";for(var t=0;t<this.patternCreator.grid.length;t++)for(var a=0;a<this.patternCreator.grid.length;a++){var i=Math.floor((this.mouseCellCol+a-2)*this.gameGrid.cellSize),r=Math.floor((this.mouseCellRow+t-2)*this.gameGrid.cellSize);r<0||r>=this.gameGrid.dimensions.gameHeight?e=!0:i<0||i>=this.gameGrid.dimensions.gameWidth?e=!0:1==this.patternCreator.grid[t][a]&&this.context.fillRect(i+this.camera.offsetX,r+this.camera.offsetY,this.gameGrid.cellSize,this.gameGrid.cellSize)}this.context.strokeStyle=e?"red":"black",this.context.lineWidth=2,this.context.strokeRect((this.mouseCellCol-2)*this.gameGrid.cellSize+this.camera.offsetX,(this.mouseCellRow-2)*this.gameGrid.cellSize+this.camera.offsetY,5*this.gameGrid.cellSize,5*this.gameGrid.cellSize)}}]),a}(G["b"]);_=S["a"]([G["a"]],_);var b=_,O=b,z=(a("dedc"),Object(s["a"])(O,f,m,!1,null,"7fc9be5a",null)),P=z.exports,X="Game of Life Online";r["a"].use(u["a"]);var Y=[{path:"/",name:"game",component:P,meta:{title:"Test"}}],R=new u["a"]({routes:Y});R.afterEach((function(e,t){window.document.title=X}));var B=R,N=a("2f62");r["a"].use(N["a"]);var j=new N["a"].Store({state:{},mutations:{},actions:{},modules:{}}),D=a("ca95");r["a"].config.productionTip=!1,r["a"].use(D),new r["a"]({router:B,store:j,render:function(e){return e(h)}}).$mount("#app")},dedc:function(e,t,a){"use strict";var i=a("e41f"),r=a.n(i);r.a},e41f:function(e,t,a){}});
//# sourceMappingURL=app.14f01ccf.js.map