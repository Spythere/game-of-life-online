(function(t){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var i={},n={app:0},a=[];function o(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=i,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},1:function(t,e){},"591c":function(t,e,r){},"5c0b":function(t,e,r){"use strict";var i=r("9c0c"),n=r.n(i);n.a},"9c0c":function(t,e,r){},a196:function(t,e,r){"use strict";var i=r("591c"),n=r.n(i);n.a},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i,n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],s=(r("5c0b"),r("2877")),c={},l=Object(s["a"])(c,a,o,!1,null,null,null),u=l.exports,h=r("8c4f"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game"},[t.patternCreator.isOpen?r("section",{staticClass:"creator"},[r("h1",{staticClass:"creator-header"},[t._v("Kreator struktur")]),r("ul",{staticClass:"creator-grid"},t._l(t.patternCreator.grid,(function(e,i){return r("ul",{key:i,staticClass:"grid-row"},t._l(t.patternCreator.grid[i],(function(e,n){return r("ul",{key:n,staticClass:"grid-col"},[r("li",{staticClass:"grid-cell",class:t.patternCreator.grid[i][n]?"activated":"",on:{click:function(e){return t.patternCreator.toggleCell(i,n)}}})])})),0)})),0),r("div",{staticClass:"creator-actions"},[r("button",{staticClass:"action_choose-pattern",on:{click:function(e){return t.patternCreator.choosePattern()}}},[t._v("Dodaj strukturę")]),r("button",{staticClass:"action_close-creator",on:{click:function(e){return t.patternCreator.closeCreator()}}},[t._v("Wyjdź z kreatora")])])]):t._e(),r("main",{staticClass:"main-content"},[r("div",{staticClass:"game-wrapper"},[r("div",{staticClass:"floating-actions"},[r("button",{staticClass:"action_open-creator",on:{click:function(e){t.patternCreator.isOpen?t.patternCreator.closeCreator():t.patternCreator.openCreator()}}},[t._v(t._s(t.patternCreator.isOpen?"Zamknij kreator":"Otwórz kreator"))])]),r("v-touch",{on:{touch:function(e){return t.console.log("xd")}}},[r("canvas",{ref:"canvas",on:{mousemove:t.mouseMove,click:t.canvasClick,mousedown:t.mouseDown,mouseup:t.mouseUp}})])],1)])])},d=[],m=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),g=r("d4ec"),p=r("bee2"),v=r("99de"),C=r("7e84"),b=r("257e"),w=r("262e"),y=r("9ab4"),O=r("60a3"),G=r("8055"),S=r.n(G),k=function(){function t(e){Object(g["a"])(this,t),this._creatorOpen=!1,this._placingPattern=!1,this._grid=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this._instance=e}return Object(p["a"])(t,[{key:"resetGrid",value:function(){for(var t=0;t<this._grid.length;t++)for(var e=0;e<this._grid[t].length;e++)this._instance.$set(this._grid[t],e,0)}},{key:"openCreator",value:function(){this._creatorOpen=!0,this._placingPattern=!1}},{key:"closeCreator",value:function(){this._creatorOpen=!1,this._placingPattern=!1}},{key:"choosePattern",value:function(){this._creatorOpen=!1,this._placingPattern=!0}},{key:"toggleCell",value:function(t,e){this._instance.$set(this._grid[t],e,this._grid[t][e]?0:1)}},{key:"grid",get:function(){return this._grid}},{key:"isOpen",get:function(){return this._creatorOpen}},{key:"isPlacing",get:function(){return this._placingPattern}}]),t}();function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){Object(m["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}(function(t){t[t["LOADING"]=0]="LOADING",t[t["PREPARED"]=1]="PREPARED",t[t["RUNNING"]=2]="RUNNING"})(i||(i={}));var j=function(t){function e(){var t;return Object(g["a"])(this,e),t=Object(v["a"])(this,Object(C["a"])(e).apply(this,arguments)),t.patternCreator=new k(Object(b["a"])(t)),t.gameState=i.LOADING,t.camera={offsetX:0,offsetY:0,zoomFactor:1},t.mouseX=0,t.mouseY=0,t.mousePanStartX=0,t.mousePanStartY=0,t.mouseZoomStartX=0,t.mouseZoomStartY=0,t.mouseCellRow=0,t.mouseCellCol=0,t.mouseDragging=!1,t.isDev=!1,t.devPort=2e3,t.canvasRatio=16/9,t.responsiveSm=900,t}return Object(w["a"])(e,t),Object(p["a"])(e,[{key:"created",value:function(){this.socket=S()(this.isDev?"http://localhost:".concat(this.devPort):""),this.handleSocketConnection()}},{key:"mounted",value:function(){var t=this;this.context=this.$refs.canvas.getContext("2d"),window.addEventListener("resize",(function(){t.resizeCanvas()})),window.addEventListener("wheel",(function(t){}))}},{key:"handleSocketConnection",value:function(){var t=this;this.socket.on("init_pack",(function(e){t.gameGrid=P({},e),console.log(e.heatMap),t.resizeCanvas(),t.camera.offsetX=(t.context.canvas.width-t.gameGrid.dimensions.cols*t.gameGrid.cellSize)/2,t.camera.offsetY=(t.context.canvas.height-t.gameGrid.dimensions.rows*t.gameGrid.cellSize)/2,t.gameState=i.RUNNING,t.renderGame()})),this.socket.on("update_pack",(function(e){e.nextGen.forEach((function(e){t.gameGrid.currentGen[e[0]][e[1]].state=e[2],t.gameGrid.currentGen[e[0]][e[1]].heatCount=e[3]})),t.gameGrid.currentIteration=e.currentIteration}))}},{key:"resizeCanvas",value:function(){var t=(window.innerWidth<this.responsiveSm?1:.8)*window.innerWidth,e=window.innerHeight<t/this.canvasRatio||window.innerWidth<this.responsiveSm?window.innerHeight:t/this.canvasRatio;this.context.canvas.width=t,this.context.canvas.height=e,this.canvasWidth=t,this.canvasHeight=e}},{key:"mouseMove",value:function(t){if(this.gameState==i.RUNNING){var e=this.context.canvas.getBoundingClientRect();this.mouseCellCol=Math.floor((t.pageX-this.camera.offsetX-e.left)/this.gameGrid.cellSize),this.mouseCellRow=Math.floor((t.pageY-this.camera.offsetY-e.top)/this.gameGrid.cellSize),this.mouseDragging&&(this.camera.offsetX=(t.pageX-this.mousePanStartX)/this.camera.zoomFactor,this.camera.offsetY=(t.pageY-this.mousePanStartY)/this.camera.zoomFactor)}}},{key:"mouseDown",value:function(t){this.gameState==i.RUNNING&&(this.patternCreator.isPlacing||(this.mousePanStartX=t.pageX-this.camera.offsetX,this.mousePanStartY=t.pageY-this.camera.offsetY,this.mouseDragging=!0))}},{key:"mouseUp",value:function(t){this.gameState==i.RUNNING&&(this.mouseDragging=!1)}},{key:"canvasClick",value:function(t){this.gameState==i.RUNNING&&!this.patternCreator.isOpen&&this.patternCreator.isPlacing&&(this.socket.emit("create_pattern",{pattern:this.patternCreator.grid,offsetRow:this.mouseCellRow-2,offsetCol:this.mouseCellCol-2}),this.patternCreator.resetGrid(),this.patternCreator.closeCreator())}},{key:"renderGame",value:function(){if(this.gameState==i.RUNNING){this.context.fillStyle="#333",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.save(),this.context.translate(this.camera.offsetX,this.camera.offsetY),this.context.lineWidth=1,this.context.strokeStyle="gray";for(var t=0;t<this.gameGrid.dimensions.cols;t++)for(var e=0;e<this.gameGrid.dimensions.rows;e++){var r=this.gameGrid.currentGen[t][e];this.context.fillStyle=r.state?"black":"white",this.context.fillRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize),this.context.strokeRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize)}var n=!1;if(this.patternCreator.isPlacing){this.context.fillStyle="green";for(var a=0;a<this.patternCreator.grid.length;a++)for(var o=0;o<this.patternCreator.grid.length;o++){var s=Math.floor((this.mouseCellCol+o-2)*this.gameGrid.cellSize),c=Math.floor((this.mouseCellRow+a-2)*this.gameGrid.cellSize);if(1==this.patternCreator.grid[a][o]){if(c<0||c>=this.gameGrid.dimensions.gameHeight){n=!0;continue}if(s<0||s>=this.gameGrid.dimensions.gameWidth){n=!0;continue}this.context.fillRect(s,c,this.gameGrid.cellSize,this.gameGrid.cellSize)}}this.context.strokeStyle=n?"red":"black",this.context.lineWidth=2,this.context.strokeRect((this.mouseCellCol-2)*this.gameGrid.cellSize,(this.mouseCellRow-2)*this.gameGrid.cellSize,5*this.gameGrid.cellSize,5*this.gameGrid.cellSize)}this.context.restore(),requestAnimationFrame(this.renderGame)}else requestAnimationFrame(this.renderGame)}}]),e}(O["b"]);j=y["a"]([O["a"]],j);var x=j,z=x,N=(r("a196"),Object(s["a"])(z,f,d,!1,null,"252645f8",null)),R=N.exports,D="Game of Life Online";n["a"].use(h["a"]);var X=[{path:"/",name:"home",component:R,meta:{title:"Test"}}],Y=new h["a"]({routes:X});Y.afterEach((function(t,e){window.document.title=D}));var I=Y,E=r("2f62");n["a"].use(E["a"]);var M=new E["a"].Store({state:{},mutations:{},actions:{},modules:{}}),U=r("ca95");n["a"].config.productionTip=!1,n["a"].use(U),new n["a"]({router:I,store:M,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.52648503.js.map