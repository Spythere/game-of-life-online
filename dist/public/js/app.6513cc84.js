(function(e){function t(t){for(var i,n,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},r={app:0},o=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"060e":function(e,t,a){"use strict";var i=a("3c03"),r=a.n(i);r.a},1:function(e,t){},"3c03":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var i=a("9c0c"),r=a.n(i);r.a},"9c0c":function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i,r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],s=(a("5c0b"),a("2877")),c={},l=Object(s["a"])(c,o,n,!1,null,null,null),h=l.exports,u=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game"},[e.patternCreator.isOpen?a("section",{staticClass:"creator"},[a("h1",{staticClass:"creator-header"},[e._v("Kreator struktur")]),a("ul",{staticClass:"creator-grid"},e._l(e.patternCreator.grid,(function(t,i){return a("ul",{key:i,staticClass:"grid-row"},e._l(e.patternCreator.grid[i],(function(t,r){return a("ul",{key:r,staticClass:"grid-col"},[a("li",{staticClass:"grid-cell",class:e.patternCreator.grid[i][r]?"activated":"",on:{click:function(t){return e.patternCreator.toggleCell(i,r)}}})])})),0)})),0),a("div",{staticClass:"creator-actions"},[a("button",{staticClass:"action_choose-pattern",on:{click:function(t){return e.patternCreator.choosePattern()}}},[e._v("Dodaj strukturę")]),a("button",{staticClass:"action_close-creator",on:{click:function(t){return e.patternCreator.closeCreator()}}},[e._v("Wyjdź z kreatora")])])]):e._e(),a("main",{staticClass:"main-content"},[a("div",{staticClass:"game-wrapper"},[a("div",{staticClass:"floating-actions"},[a("button",{staticClass:"action_open-creator",on:{click:function(t){e.patternCreator.isOpen?e.patternCreator.closeCreator():e.patternCreator.openCreator()}}},[e._v("Kreator")]),a("button",{staticClass:"action_toggle-heatmap",on:{click:function(t){return e.toggleHeatmapView()}}},[e._v("Heatmap")])]),a("v-touch",{on:{touch:function(t){return e.console.log("xd")}}},[a("canvas",{ref:"canvas",on:{mousemove:e.mouseMove,click:e.canvasClick,mousedown:e.mouseDown,mouseup:e.mouseUp}})])],1)])])},f=[],d=(a("4160"),a("159b"),a("5530")),g=a("d4ec"),v=a("bee2"),p=a("257e"),C=a("262e"),w=a("2caf"),G=a("9ab4"),S=a("60a3"),x=a("8055"),k=a.n(x),y=function(){function e(t){Object(g["a"])(this,e),this._creatorOpen=!1,this._placingPattern=!1,this._grid=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this._instance=t}return Object(v["a"])(e,[{key:"resetGrid",value:function(){for(var e=0;e<this._grid.length;e++)for(var t=0;t<this._grid[e].length;t++)this._instance.$set(this._grid[e],t,0)}},{key:"openCreator",value:function(){this._creatorOpen=!0,this._placingPattern=!1}},{key:"closeCreator",value:function(){this._creatorOpen=!1,this._placingPattern=!1}},{key:"choosePattern",value:function(){this._creatorOpen=!1,this._placingPattern=!0}},{key:"toggleCell",value:function(e,t){this._instance.$set(this._grid[e],t,this._grid[e][t]?0:1)}},{key:"grid",get:function(){return this._grid}},{key:"isOpen",get:function(){return this._creatorOpen}},{key:"isPlacing",get:function(){return this._placingPattern}}]),e}();(function(e){e[e["LOADING"]=0]="LOADING",e[e["PREPARED"]=1]="PREPARED",e[e["RUNNING"]=2]="RUNNING"})(i||(i={}));var _=function(e){Object(C["a"])(a,e);var t=Object(w["a"])(a);function a(){var e;return Object(g["a"])(this,a),e=t.apply(this,arguments),e.patternCreator=new y(Object(p["a"])(e)),e.gameState=i.LOADING,e.camera={offsetX:0,offsetY:0,viewBox:{fromCellX:0,fromCellY:0,toCellX:0,toCellY:0},zoomFactor:0},e.mouseX=0,e.mouseY=0,e.mousePanStartX=0,e.mousePanStartY=0,e.mouseZoomStartX=0,e.mouseZoomStartY=0,e.mouseCellRow=0,e.mouseCellCol=0,e.mouseDragging=!1,e.heatmapOn=!1,e.isDev=!1,e.devPort=2e3,e.canvasRatio=16/9,e.responsiveSm=900,e}return Object(v["a"])(a,[{key:"created",value:function(){this.socket=k()(this.isDev?"http://localhost:".concat(this.devPort):""),this.handleSocketConnection(),this.camera.zoomFactor=1}},{key:"mounted",value:function(){var e=this;this.context=this.$refs.canvas.getContext("2d"),window.addEventListener("resize",(function(){e.resizeCanvas()})),window.addEventListener("wheel",(function(e){}))}},{key:"handleSocketConnection",value:function(){var e=this;this.socket.on("init_pack",(function(t){e.gameGrid=Object(d["a"])({},t),e.resizeCanvas(),e.camera.offsetX=(e.context.canvas.width-e.gameGrid.dimensions.cols*e.gameGrid.cellSize)/2,e.camera.offsetY=(e.context.canvas.height-e.gameGrid.dimensions.rows*e.gameGrid.cellSize)/2;var a=e.context.canvas.getBoundingClientRect();e.camera.viewBox.fromCellX=Math.floor(-e.camera.offsetX/e.gameGrid.cellSize),e.camera.viewBox.toCellX=e.camera.viewBox.fromCellX+Math.floor(a.width/e.gameGrid.cellSize),e.camera.viewBox.fromCellY=Math.floor(-e.camera.offsetY/e.gameGrid.cellSize),e.camera.viewBox.toCellY=e.camera.viewBox.fromCellY+Math.floor(a.height/e.gameGrid.cellSize),e.gameState=i.RUNNING,e.renderGame()})),this.socket.on("update_pack",(function(t){t.nextGen.forEach((function(t){e.$set(e.gameGrid.currentGen[t[0]][t[1]],"state",t[2]),e.$set(e.gameGrid.currentGen[t[0]][t[1]],"heatCount",t[3])})),e.gameGrid.currentIteration=t.currentIteration}))}},{key:"toggleHeatmapView",value:function(){this.heatmapOn=!this.heatmapOn,console.log("Heatmap view ".concat(this.heatmapOn?"on":"off"))}},{key:"resizeCanvas",value:function(){var e=(window.innerWidth<this.responsiveSm?1:.8)*window.innerWidth,t=window.innerHeight<e/this.canvasRatio||window.innerWidth<this.responsiveSm?window.innerHeight:e/this.canvasRatio;this.context.canvas.width=e,this.context.canvas.height=t,this.canvasWidth=e,this.canvasHeight=t}},{key:"mouseMove",value:function(e){if(this.gameState==i.RUNNING){var t=this.context.canvas.getBoundingClientRect();this.mouseCellCol=Math.floor((e.pageX-this.camera.offsetX-t.left)/this.gameGrid.cellSize),this.mouseCellRow=Math.floor((e.pageY-this.camera.offsetY-t.top)/this.gameGrid.cellSize),this.mouseDragging&&(this.camera.offsetX=(e.pageX-this.mousePanStartX)/this.camera.zoomFactor,this.camera.offsetY=(e.pageY-this.mousePanStartY)/this.camera.zoomFactor);var a=this.context.canvas.getBoundingClientRect();this.camera.viewBox.fromCellX=Math.floor(-this.camera.offsetX/this.gameGrid.cellSize),this.camera.viewBox.toCellX=this.camera.viewBox.fromCellX+Math.floor(a.width/this.gameGrid.cellSize),this.camera.viewBox.fromCellY=Math.floor(-this.camera.offsetY/this.gameGrid.cellSize),this.camera.viewBox.toCellY=this.camera.viewBox.fromCellY+Math.floor(a.height/this.gameGrid.cellSize)}}},{key:"mouseDown",value:function(e){this.gameState==i.RUNNING&&(this.patternCreator.isPlacing||(this.mousePanStartX=e.pageX-this.camera.offsetX,this.mousePanStartY=e.pageY-this.camera.offsetY,this.mouseDragging=!0))}},{key:"mouseUp",value:function(e){this.gameState==i.RUNNING&&(this.mouseDragging=!1)}},{key:"canvasClick",value:function(e){this.gameState==i.RUNNING&&!this.patternCreator.isOpen&&this.patternCreator.isPlacing&&(this.socket.emit("create_pattern",{pattern:this.patternCreator.grid,offsetRow:this.mouseCellRow-2,offsetCol:this.mouseCellCol-2}),this.patternCreator.resetGrid(),this.patternCreator.closeCreator())}},{key:"renderGame",value:function(){if(this.gameState==i.RUNNING){this.context.fillStyle="#333",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.save(),this.context.translate(this.camera.offsetX,this.camera.offsetY),this.context.lineWidth=1,this.context.strokeStyle="gray";for(var e=this.camera.viewBox.fromCellX;e<=this.camera.viewBox.toCellX+1;e++)for(var t=this.camera.viewBox.fromCellY;t<=this.camera.viewBox.toCellY+1;t++)if(!(e>this.gameGrid.dimensions.rows-1||e<0)&&!(t>this.gameGrid.dimensions.cols-1||t<0)){var a=this.gameGrid.currentGen[e][t];this.heatmapOn?this.context.fillStyle="hsl(".concat(a.heatCount,", 100%, 50%)"):this.context.fillStyle=a.state?"black":"white",this.context.fillRect(e*this.gameGrid.cellSize,t*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize),this.context.strokeRect(e*this.gameGrid.cellSize,t*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize)}var r=!1;if(this.patternCreator.isPlacing){this.context.fillStyle="green";for(var o=0;o<this.patternCreator.grid.length;o++)for(var n=0;n<this.patternCreator.grid.length;n++){var s=Math.floor((this.mouseCellCol+n-2)*this.gameGrid.cellSize),c=Math.floor((this.mouseCellRow+o-2)*this.gameGrid.cellSize);if(1==this.patternCreator.grid[o][n]){if(c<0||c>=this.gameGrid.dimensions.gameHeight){r=!0;continue}if(s<0||s>=this.gameGrid.dimensions.gameWidth){r=!0;continue}this.context.fillRect(s,c,this.gameGrid.cellSize,this.gameGrid.cellSize)}}this.context.strokeStyle=r?"red":"black",this.context.lineWidth=2,this.context.strokeRect((this.mouseCellCol-2)*this.gameGrid.cellSize,(this.mouseCellRow-2)*this.gameGrid.cellSize,5*this.gameGrid.cellSize,5*this.gameGrid.cellSize)}this.context.restore(),requestAnimationFrame(this.renderGame)}else requestAnimationFrame(this.renderGame)}}]),a}(S["b"]);_=G["a"]([S["a"]],_);var b=_,O=b,z=(a("060e"),Object(s["a"])(O,m,f,!1,null,"5a24d018",null)),P=z.exports,R="Game of Life Online";r["a"].use(u["a"]);var N=[{path:"/",name:"home",component:P,meta:{title:"Test"}}],X=new u["a"]({routes:N});X.afterEach((function(e,t){window.document.title=R}));var Y=X,j=a("2f62");r["a"].use(j["a"]);var B=new j["a"].Store({state:{},mutations:{},actions:{},modules:{}}),M=a("ca95");r["a"].config.productionTip=!1,r["a"].use(M),new r["a"]({router:Y,store:B,render:function(e){return e(h)}}).$mount("#app")}});
//# sourceMappingURL=app.6513cc84.js.map