(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,s=1;s<i.length;s++){var c=i[s];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},r=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"060e":function(t,e,i){"use strict";var a=i("3c03"),n=i.n(a);n.a},1:function(t,e){},"3c03":function(t,e,i){},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),n=i.n(a);n.a},"9c0c":function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a,n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],s=(i("5c0b"),i("2877")),c={},l=Object(s["a"])(c,r,o,!1,null,null,null),u=l.exports,h=i("8c4f"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game"},[t.patternCreator.isOpen?i("section",{staticClass:"creator"},[i("h1",{staticClass:"creator-header"},[t._v("Kreator struktur")]),i("ul",{staticClass:"creator-grid"},t._l(t.patternCreator.grid,(function(e,a){return i("ul",{key:a,staticClass:"grid-row"},t._l(t.patternCreator.grid[a],(function(e,n){return i("ul",{key:n,staticClass:"grid-col"},[i("li",{staticClass:"grid-cell",class:t.patternCreator.grid[a][n]?"activated":"",on:{click:function(e){return t.patternCreator.toggleCell(a,n)}}})])})),0)})),0),i("div",{staticClass:"creator-actions"},[i("button",{staticClass:"action_choose-pattern",on:{click:function(e){return t.patternCreator.choosePattern()}}},[t._v("Dodaj strukturę")]),i("button",{staticClass:"action_close-creator",on:{click:function(e){return t.patternCreator.closeCreator()}}},[t._v("Wyjdź z kreatora")])])]):t._e(),i("main",{staticClass:"main-content"},[i("div",{staticClass:"game-wrapper"},[i("div",{staticClass:"floating-actions"},[i("button",{staticClass:"action_open-creator",on:{click:function(e){t.patternCreator.isOpen?t.patternCreator.closeCreator():t.patternCreator.openCreator()}}},[t._v("Kreator")]),i("button",{staticClass:"action_toggle-heatmap",on:{click:function(e){return t.toggleHeatmapView()}}},[t._v("Heatmap")])]),i("v-touch",{on:{touch:function(e){return t.console.log("xd")}}},[i("canvas",{ref:"canvas",on:{mousemove:t.mouseMove,click:t.canvasClick,mousedown:t.mouseDown,mouseup:t.mouseUp}})])],1)])])},m=[],d=(i("4160"),i("159b"),i("5530")),g=i("d4ec"),p=i("bee2"),v=i("257e"),C=i("262e"),G=i("2caf"),S=i("9ab4"),w=i("60a3"),k=i("8055"),y=i.n(k),_=function(){function t(e){Object(g["a"])(this,t),this._creatorOpen=!1,this._placingPattern=!1,this._grid=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this._instance=e}return Object(p["a"])(t,[{key:"resetGrid",value:function(){for(var t=0;t<this._grid.length;t++)for(var e=0;e<this._grid[t].length;e++)this._instance.$set(this._grid[t],e,0)}},{key:"openCreator",value:function(){this._creatorOpen=!0,this._placingPattern=!1}},{key:"closeCreator",value:function(){this._creatorOpen=!1,this._placingPattern=!1}},{key:"choosePattern",value:function(){this._creatorOpen=!1,this._placingPattern=!0}},{key:"toggleCell",value:function(t,e){this._instance.$set(this._grid[t],e,this._grid[t][e]?0:1)}},{key:"grid",get:function(){return this._grid}},{key:"isOpen",get:function(){return this._creatorOpen}},{key:"isPlacing",get:function(){return this._placingPattern}}]),t}();(function(t){t[t["LOADING"]=0]="LOADING",t[t["PREPARED"]=1]="PREPARED",t[t["RUNNING"]=2]="RUNNING"})(a||(a={}));var b=function(t){Object(C["a"])(i,t);var e=Object(G["a"])(i);function i(){var t;return Object(g["a"])(this,i),t=e.apply(this,arguments),t.patternCreator=new _(Object(v["a"])(t)),t.gameState=a.LOADING,t.camera={offsetX:0,offsetY:0,zoomFactor:1},t.mouseX=0,t.mouseY=0,t.mousePanStartX=0,t.mousePanStartY=0,t.mouseZoomStartX=0,t.mouseZoomStartY=0,t.mouseCellRow=0,t.mouseCellCol=0,t.mouseDragging=!1,t.heatmapOn=!1,t.isDev=!1,t.devPort=2e3,t.canvasRatio=16/9,t.responsiveSm=900,t}return Object(p["a"])(i,[{key:"created",value:function(){this.socket=y()(this.isDev?"http://localhost:".concat(this.devPort):""),this.handleSocketConnection()}},{key:"mounted",value:function(){var t=this;this.context=this.$refs.canvas.getContext("2d"),window.addEventListener("resize",(function(){t.resizeCanvas()})),window.addEventListener("wheel",(function(t){}))}},{key:"handleSocketConnection",value:function(){var t=this;this.socket.on("init_pack",(function(e){t.gameGrid=Object(d["a"])({},e),t.resizeCanvas(),t.camera.offsetX=(t.context.canvas.width-t.gameGrid.dimensions.cols*t.gameGrid.cellSize)/2,t.camera.offsetY=(t.context.canvas.height-t.gameGrid.dimensions.rows*t.gameGrid.cellSize)/2,t.gameState=a.RUNNING,t.renderGame()})),this.socket.on("update_pack",(function(e){e.nextGen.forEach((function(e){t.$set(t.gameGrid.currentGen[e[0]][e[1]],"state",e[2]),t.$set(t.gameGrid.currentGen[e[0]][e[1]],"heatCount",e[3])})),t.gameGrid.currentIteration=e.currentIteration}))}},{key:"toggleHeatmapView",value:function(){this.heatmapOn=!this.heatmapOn,console.log("Heatmap view ".concat(this.heatmapOn?"on":"off"))}},{key:"resizeCanvas",value:function(){var t=(window.innerWidth<this.responsiveSm?1:.8)*window.innerWidth,e=window.innerHeight<t/this.canvasRatio||window.innerWidth<this.responsiveSm?window.innerHeight:t/this.canvasRatio;this.context.canvas.width=t,this.context.canvas.height=e,this.canvasWidth=t,this.canvasHeight=e}},{key:"mouseMove",value:function(t){if(this.gameState==a.RUNNING){var e=this.context.canvas.getBoundingClientRect();this.mouseCellCol=Math.floor((t.pageX-this.camera.offsetX-e.left)/this.gameGrid.cellSize),this.mouseCellRow=Math.floor((t.pageY-this.camera.offsetY-e.top)/this.gameGrid.cellSize),this.mouseDragging&&(this.camera.offsetX=(t.pageX-this.mousePanStartX)/this.camera.zoomFactor,this.camera.offsetY=(t.pageY-this.mousePanStartY)/this.camera.zoomFactor)}}},{key:"mouseDown",value:function(t){this.gameState==a.RUNNING&&(this.patternCreator.isPlacing||(this.mousePanStartX=t.pageX-this.camera.offsetX,this.mousePanStartY=t.pageY-this.camera.offsetY,this.mouseDragging=!0))}},{key:"mouseUp",value:function(t){this.gameState==a.RUNNING&&(this.mouseDragging=!1)}},{key:"canvasClick",value:function(t){this.gameState==a.RUNNING&&!this.patternCreator.isOpen&&this.patternCreator.isPlacing&&(this.socket.emit("create_pattern",{pattern:this.patternCreator.grid,offsetRow:this.mouseCellRow-2,offsetCol:this.mouseCellCol-2}),this.patternCreator.resetGrid(),this.patternCreator.closeCreator())}},{key:"renderGame",value:function(){if(this.gameState==a.RUNNING){this.context.fillStyle="#333",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.save(),this.context.translate(this.camera.offsetX,this.camera.offsetY),this.context.lineWidth=1,this.context.strokeStyle="gray";for(var t=0;t<this.gameGrid.dimensions.rows;t++)for(var e=0;e<this.gameGrid.dimensions.cols;e++){var i=this.gameGrid.currentGen[t][e];this.heatmapOn?this.context.fillStyle="hsl(".concat(i.heatCount,", 100%, 50%)"):this.context.fillStyle=i.state?"black":"white",this.context.fillRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize),this.context.strokeRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize)}var n=!1;if(this.patternCreator.isPlacing){this.context.fillStyle="green";for(var r=0;r<this.patternCreator.grid.length;r++)for(var o=0;o<this.patternCreator.grid.length;o++){var s=Math.floor((this.mouseCellCol+o-2)*this.gameGrid.cellSize),c=Math.floor((this.mouseCellRow+r-2)*this.gameGrid.cellSize);if(1==this.patternCreator.grid[r][o]){if(c<0||c>=this.gameGrid.dimensions.gameHeight){n=!0;continue}if(s<0||s>=this.gameGrid.dimensions.gameWidth){n=!0;continue}this.context.fillRect(s,c,this.gameGrid.cellSize,this.gameGrid.cellSize)}}this.context.strokeStyle=n?"red":"black",this.context.lineWidth=2,this.context.strokeRect((this.mouseCellCol-2)*this.gameGrid.cellSize,(this.mouseCellRow-2)*this.gameGrid.cellSize,5*this.gameGrid.cellSize,5*this.gameGrid.cellSize)}this.context.restore(),requestAnimationFrame(this.renderGame)}else requestAnimationFrame(this.renderGame)}}]),i}(w["b"]);b=S["a"]([w["a"]],b);var O=b,x=O,P=(i("060e"),Object(s["a"])(x,f,m,!1,null,"5a24d018",null)),z=P.exports,N="Game of Life Online";n["a"].use(h["a"]);var R=[{path:"/",name:"home",component:z,meta:{title:"Test"}}],j=new h["a"]({routes:R});j.afterEach((function(t,e){window.document.title=N}));var D=j,X=i("2f62");n["a"].use(X["a"]);var Y=new X["a"].Store({state:{},mutations:{},actions:{},modules:{}}),I=i("ca95");n["a"].config.productionTip=!1,n["a"].use(I),new n["a"]({router:D,store:Y,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.d2efbc95.js.map